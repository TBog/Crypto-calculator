name = "crypto-news-updater"
main = "news-updater-cron.js"
compatibility_date = "2024-10-01"
compatibility_flags = ["nodejs_compat"]

# Cron trigger - runs every hour at the top of the hour
# Format: "minute hour day month day-of-week"
# "0 * * * *" = every hour at minute 0
[triggers]
crons = ["0 * * * *"]

# KV namespace for storing analyzed news
[[kv_namespaces]]
binding = "CRYPTO_NEWS_CACHE"
# Replace with actual KV namespace ID from: wrangler kv:namespace create "CRYPTO_NEWS_CACHE"
# See DEPLOYMENT_GUIDE.md Step 2 for instructions
id = "REPLACE_WITH_YOUR_KV_NAMESPACE_ID_FROM_STEP_2"

# Environment bindings
# The NEWSDATA_API_KEY should be set using: wrangler secret put NEWSDATA_API_KEY
# The GEMINI_API_KEY should be set using: wrangler secret put GEMINI_API_KEY
# This keeps the API keys secure and out of version control

[env.production]
# Production environment configuration
# Secrets are automatically available in env.NEWSDATA_API_KEY and env.GEMINI_API_KEY
[[env.production.kv_namespaces]]
binding = "CRYPTO_NEWS_CACHE"
# Replace with production KV namespace ID from: wrangler kv:namespace create "CRYPTO_NEWS_CACHE" --env production
id = "REPLACE_WITH_YOUR_PRODUCTION_KV_NAMESPACE_ID"
